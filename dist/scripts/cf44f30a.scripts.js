"use strict";function ucwords(a){return(a+"").replace(/^([a-z\u00E0-\u00FC])|\s+([a-z\u00E0-\u00FC])/g,function(a){return a.toUpperCase()})}angular.module("halamanHeritageApp",["shoppinpal.mobile-menu","ui.bootstrap","ui","ngResource","google-maps"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/splash.html",controller:"SplashCtrl"}).when("/404",{templateUrl:"views/404.html",controller:"ErrCtrl"}).when("/maps",{templateUrl:"views/maps.html",controller:"MapsCtrl"}).when("/category/:categoryId/:placeId/details",{templateUrl:"views/categoryDetail.html",controller:"CategorydetailCtrl"}).when("/categories",{templateUrl:"views/categories.html",controller:"CategoriesCtrl"}).otherwise({redirectTo:"/404"})}]),angular.module("halamanHeritageApp").controller("SplashCtrl",["$scope",function(a){a.links={categories:"#/categories",maps:"#/maps"}}]),angular.module("halamanHeritageApp").controller("CategoriesCtrl",["$scope","services",function(a,b){a.categories=b.getData(),a.oneAtATime=!0}]),angular.module("halamanHeritageApp").controller("CategorydetailCtrl",["$scope","$routeParams","services","toMaps",function(a,b,c,d){a.category=b.categoryId,a.placeId=b.placeId,c.getDetail(a.category,a.placeId).then(function(c){d.set=!0,d.latitude=c.Latitude,d.longitude=c.Longitude,d.infoWindow="<h3>"+c.Name+'</h3><p><a href="#/category/'+b.categoryId+"/"+b.placeId+'/details">More details..</a></p>',d.id=c.id,a.placeDetail=c})}]),angular.module("halamanHeritageApp").controller("MapsCtrl",["$scope","services","toMaps",function(a,b,c){a.center={latitude:1.532528,longitude:110.358052},a.markers=[],a.windows=[],a.markClick=!0,a.zoom=15,a.fit=!0,b.getMarkers().then(function(b){a.markers=b,navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(b){c.set?(c.set=!1,console.log(c.latitude),console.log(c.longitude),a.zoom=17,a.center={latitude:c.latitude,longitude:c.longitude}):a.center={latitude:b.coords.latitude,longitude:b.coords.longitude},a.markers.push({latitude:b.coords.latitude,longitude:b.coords.longitude,infoWindow:"You are here!",icon:"img/markers/you.png"}),a.$apply()},function(){})})}]),angular.module("halamanHeritageApp").factory("services",["$http","$q",function(a,b){return{getData:function(){var c=b.defer();return a.get("places/categories.json").then(function(b){b.data;var d=[];angular.forEach(b.data,function(b){angular.forEach(b,function(b){a.get("places/"+b+".json").then(function(a){var c=a.data,e=b.split("_").join(" ");d.push({rawName:b,name:ucwords(e),places:c})})})}),c.resolve(d)}),c.promise},getDetail:function(c,d){var e=b.defer();return a.get("places/"+c+".json").then(function(a){var b;angular.forEach(a.data,function(a){a.id==d&&(b=a)}),e.resolve(b)}),e.promise},getMarkers:function(){var c=b.defer();return a.get("places/categories.json").then(function(b){b.data;var d=[];angular.forEach(b.data,function(b){angular.forEach(b,function(b){a.get("places/"+b+".json").then(function(a){var c=a.data;angular.forEach(c,function(a){d.push({latitude:a.Latitude,longitude:a.Longitude,infoWindow:"<h3>"+a.Name+'</h3><p><a href="#/category/'+b+"/"+a.id+'/details">More details..</a></p>',icon:"img/markers/"+b+".png"})})})})}),c.resolve(d)}),c.promise}}}]),angular.module("halamanHeritageApp").directive("navigation",function(){return{templateUrl:"views/templates/menu.html",restrict:"E",controller:["$scope",function(){}]}}),angular.module("halamanHeritageApp").factory("toMaps",function(){return{set:!1,id:-1,latitude:0,longitude:0,infoWindow:""}});